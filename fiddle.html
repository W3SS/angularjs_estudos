
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title> - jsFiddle demo</title>
  
  <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/angularjs/1.0.1/angular.js'></script>
  

<script type='text/javascript'>//<![CDATA[ 

var myAppModule = angular.module("myApp", []);

myAppModule.directive('myDropdownB', function($compile) {
    return {
        restrict: "E",
        priority: 1000,
        terminal: true,
        compile: function(tElement, tAttrs, transclude) {

            var tplEl = angular.element('<select></select>');
            tplEl.attr("ng-options", "i.id as i.name for i in foodB");

            for(attr in tAttrs.$attr) {
                tplEl.attr(tAttrs.$attr[attr], tAttrs[attr]);
            }
            
            
            return function(scope, element, attrs) {
            	console.log(scope);
                var compiledEl = $compile(tplEl)(scope);
                element.replaceWith(compiledEl);
	           	console.log(attrs);
            }
        },
        controller: ['$scope', '$attrs', function($scope, $attrs) {
            $scope.foodB = [{
                id: '1',
                name: 'Apple'},
            {
                id: '2',
                name: 'Rice'},
            {
                id: '3',
                name: 'Banana'}];}]
    };
});


MyCtrl = function($scope) {

}
//]]>  

</script>


</head>
<body ng-app="myApp">
  <div ng-controller="MyCtrl">
    <my-dropdown-b ng-model='valueB'></my-dropdown-b>
    {{valueB}}
</div>

  
</body>


</html>

